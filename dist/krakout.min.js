"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t,e){e.Krakout=e.Krakout||t(e)}(function(t){function e(t){var e=t.config.x,n=t.config.y;(0>=e||e+t.config.width>=i)&&(t.offsetX=~t.offsetX+1),(0>=n||n+t.config.width>=o)&&(t.offsetY=~t.offsetY+1),t.change({x:t.config.x-t.offsetX,y:t.config.y-t.offsetY})}var n={},i=4096,o=2160,r=function u(e){function r(){a(["ball","board","layout"],s(e));var t=new l(h.board);e.addEventListener("mousemove",function(e){t.change({x:e.screenX/c.ratioWidth})});var n=new f(h.ball),i=c.balls=[];i.push(n)}function a(t,n){if("string"!=typeof t)for(var i in t)a(t[i],n);else{var o=document.createElement("canvas");o.style.position="absolute",o.style.top=0,o.style.left=0,o.id=o.className="krakout-canvas-"+t,e.appendChild(o),n(o),h[t]=o.getContext("2d")}}function s(e){var n=parseFloat(t.getComputedStyle(e).width),r=parseFloat(t.getComputedStyle(e).height);return function(t){t.width=i,t.height=o,t.style.width=i,t.style.height=o,t.style.transform="scale3d("+n/i+", "+r/o+", 1)",t.style.transformOrigin="top left"}}arguments.length<=1||void 0===arguments[1]?n:arguments[1];_classCallCheck(this,u);var c=this,h=c._canvas={},y=c.screenWidth=parseFloat(getComputedStyle(e).width),g=(c.ratioWidth=y/i,c.screenHeight=parseFloat(getComputedStyle(e).height));c.ratioHeight=g/o;r()},a=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,t);var i=this;i.__willChange=[],i.ctx=e,i.config=n,n.x=n.x||0,n.y=n.y||0,i.regChange(["x","y","width","height"]),i.initReady(),i.reDraw(),i.initComplete()}return _createClass(t,[{key:"regChange",value:function(t){if(t)if("string"==typeof t)this.__willChange.push(t);else if(t.length)this.__willChange=this.__willChange.concat(t);else for(var e in t)this.regChange(item)}},{key:"change",value:function(t){var e=!1;for(var n in t)n in this.config&&this.__willChange.includes(n)&&(this.config[n]=t[n],e=!0);e&&this.reDraw()}},{key:"clear",value:function(){this.ctx.clearRect(0,0,i,o)}},{key:"initReady",value:function(){}},{key:"beforeDraw",value:function(){this.clear()}},{key:"draw",value:function(){}},{key:"afterDraw",value:function(){}},{key:"initComplete",value:function(){}},{key:"reDraw",value:function(){this.beforeDraw(),this.draw(),this.afterDraw()}}]),t}(),s=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{width:400,height:20}:arguments[1];return _classCallCheck(this,e),n.x=(i-n.width)/2,n.y=o-n.height,_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t,n))}return _inherits(e,t),e}(a),l=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"draw",value:function(){var t=this.ctx,e=this.config,n=new Path2D;n.rect(e.x,e.y,e.width,e.height),t.fill(n)}},{key:"initComplete",value:function(){}}]),e}(s),c=10,h=function(t){function n(t){var e=arguments.length<=1||void 0===arguments[1]?{width:20}:arguments[1];return _classCallCheck(this,n),e.x=(i-e.width)/2,e.y=o-e.width-20,_possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t,e))}return _inherits(n,t),_createClass(n,[{key:"move",value:function(){this.offsetX=9*Math.random()|1,this.offsetY=c-this.offsetX,this.proceed()}},{key:"proceed",value:function(){var t=this;t.moveFlag=setInterval(function(){e(t)},1)}}]),n}(a),f=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"draw",value:function(){var t=this.ctx,e=this.config,n=new Path2D;n.arc(e.x,e.y,e.width,0,2*Math.PI),t.fill(n)}},{key:"initComplete",value:function(){this.move()}}]),e}(h);return r},window);