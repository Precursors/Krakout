"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e,t){t.Krakout=t.Krakout||e(t)}(function(e){var t={viewmode:"fullscreen"},n=4096,i=2160,r=function s(r){function o(){a(["ball","board","layout"],c(r));var e=new l(u.board);r.addEventListener("mousemove",function(t){e.change({x:t.screenX/h.ratioWidth})})}function a(e,t){if("string"!=typeof e)for(var n in e)a(e[n],t);else{var i=document.createElement("canvas");i.style.position="absolute",i.style.top=0,i.style.left=0,i.id=i.className="krakout-canvas-"+e,r.appendChild(i),t(i),u[e]=i.getContext("2d")}}function c(t){return function(r){r.width=n,r.height=i,r.style.width=e.getComputedStyle(t).width,r.style.height=e.getComputedStyle(t).height}}arguments.length<=1||void 0===arguments[1]?t:arguments[1];_classCallCheck(this,s);var h=this,u=h._canvas={},f=h.screenWidth=parseFloat(getComputedStyle(r).width),y=(h.ratioWidth=f/n,h.screenHeight=parseFloat(getComputedStyle(r).height));h.ratioHeight=y/i;o()},o=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,e);var i=this;i.__willChange=[],i.ctx=t,i.config=n,n.x=n.x||0,n.y=n.y||0,i.regChange(["x","y","width","height"]),i.initReady(),i.reDraw(),i.initComplete()}return _createClass(e,[{key:"regChange",value:function(e){if(e)if("string"==typeof e)this.__willChange.push(e);else if(e.length)this.__willChange=this.__willChange.concat(e);else for(var t in e)this.regChange(item)}},{key:"change",value:function(e){var t=!1;for(var n in e)n in this.config&&this.__willChange.includes(n)&&(this.config[n]=e[n],t=!0);t&&this.reDraw()}},{key:"clear",value:function(){var e=this.last;e&&this.ctx.clearRect(e.x,e.y,e.width,e.height)}},{key:"record",value:function(){var e=this.last={};for(var t in this.config)e[t]=this.config[t]}},{key:"initReady",value:function(){}},{key:"beforeDraw",value:function(){this.clear(),this.record()}},{key:"draw",value:function(){}},{key:"afterDraw",value:function(){}},{key:"initComplete",value:function(){}},{key:"reDraw",value:function(){this.beforeDraw(),this.draw(),this.afterDraw()}}]),e}(),a=function(e){function t(e){var r=arguments.length<=1||void 0===arguments[1]?{width:400,height:40}:arguments[1];return _classCallCheck(this,t),r.x=(n-r.width)/2,r.y=i-r.height,_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,r))}return _inherits(t,e),t}(o),l=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(){var e=this.ctx,t=this.config,n=new Path2D;n.rect(t.x,t.y,t.width,t.height),e.fill(n)}},{key:"initComplete",value:function(){}}]),t}(a);return r},window);